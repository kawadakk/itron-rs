<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Rust interface to interact with operating systems based on μITRON and its derivatives."><meta name="keywords" content="rust, rustlang, rust-lang, itron_asp3"><title>itron_asp3 - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><script defer src="../main.js"></script>
    <noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../itron_asp3/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><h2 class="location">Crate itron_asp3</h2><div class="block version"><div class="narrow-helper"></div><p>Version 0.1.9</p></div><div class="sidebar-elems"><a id="all-types" href="all.html"><p>See all itron_asp3's items</p></a><div class="block items"><ul><li><a href="#modules">Modules</a></li></ul></div><div id="sidebar-vars" data-name="itron_asp3" data-ty="mod" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">itron_asp3</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/itron_asp3/lib.rs.html#1-81" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Rust interface to interact with operating systems based on μITRON and its derivatives.</p>
<h3 id="kernel-selection" class="section-header"><a href="#kernel-selection">Kernel Selection</a></h3>
<p>This crate exposes a Cargo feature for each supported RTOS kernel
implementation. The following ones are supported:</p>
<ul>
<li><code>asp3</code>: <a href="https://toppers.jp/asp3-kernel.html">TOPPERS/ASP3</a>
<ul>
<li>Additional features supported: <code>dcre</code> (dynamic object creation), <code>rstr_task</code> (restricted tasks), <code>messagebuf</code> (message buffers), <code>ovrhdr</code> (overrun handlers), <code>subprio</code> (task subpriorities)</li>
</ul>
</li>
<li><code>solid_asp3</code>: TOPPERS/ASP3 with <a href="https://solid.kmckk.com/SOLID/">SOLID</a> extensions
<ul>
<li>Additional features supported: <code>dcre</code> (dynamic object creation), <code>messagebuf</code> (message buffers),  <code>pi_mutex</code> (priority inheritance), <code>exd_tsk</code> (exit and delete the calling task)</li>
</ul>
</li>
<li><code>fmp3</code>: <a href="https://toppers.jp/fmp3-kernel.html">TOPPERS/FMP3</a>
<ul>
<li>Additional features supported: <code>systim_local</code> (processor-local kernel ticks)</li>
</ul>
</li>
<li><code>solid_fmp3</code>: TOPPERS/FMP3 with <a href="https://solid.kmckk.com/SOLID/">SOLID</a> extensions
<ul>
<li>Additional features supported: <code>dcre</code> (dynamic object creation), <code>systim_local</code> (processor-local kernel ticks), <code>exd_tsk</code> (exit and delete the calling task)</li>
</ul>
</li>
<li><code>none</code> (default): Stub implementation that exposes all functions but always panics</li>
</ul>
<p>It’s an error to enable more than one of these features. It’s unsafe to specify an incorrect kernel because the ABIs differ between kernels. This crate assumes it’s inherently safe to call the specified kernel’s API functions (provided the usage is correct). Specifying unsupported features for a given kernel might result in a compiler or linker error¹.</p>
<p>Items are <code>cfg</code>-gated according to the selected kernel’s supported feature set so that the uses of non-existent features are detected at compile time.</p>
<sub>
¹ TOPPERS kernels' extensions are mutually exclusive, but building the crate documentation should still succeed even if all of them are specified.
</sub>
<h3 id="cargo-features" class="section-header"><a href="#cargo-features">Cargo Features</a></h3>
<p>In addition to the kernel selection features described above, this package
supports the following Cargo features:</p>
<ul>
<li><code>nightly</code> enables nightly-only features. Currently, this feature enables the use of <a href="https://doc.rust-lang.org/unstable-book/language-features/doc-cfg.html"><code>doc_cfg</code></a> and exposes <code>itron::time::timeout!</code>.</li>
<li><code>unstable</code> enables unstable (in terms of API stability), experimental features that may be changed or removed in the future.</li>
</ul>
<h3 id="api-design" class="section-header"><a href="#api-design">API Design</a></h3>
<p><em>This section is relevant only when the <code>unstable</code> feature is enabled.</em></p>
<h4 id="object-id-wrappers" class="section-header"><a href="#object-id-wrappers">Object ID Wrappers</a></h4>
<p>Kernel object IDs are encapsulated in opaque wrappers, which can be constructed either by calling the creation methods or by converting from raw object IDs. Although interacting with arbitrary kernel objects do not exhibit memory unsafety by itself, conversion from raw object IDs has to go through <code>unsafe</code> calls because the created wrappers could be used to interfere with other code’s usage of such objects, breaking its assumptions, possibly violating memory safety. Deleting unowned objects is <code>unsafe</code> as well because such objects could be still in use by their actual owners, and the actual owners would touch supposedly-unrelated objects if the IDs were reused. This system, which we call <em>external object safety</em>, is related to I/O safety from <a href="https://github.com/rust-lang/rfcs/pull/3128">a Rust RFC</a> being proposed at the point of writing.</p>
<p>It’s allowed to <a href="task/fn.current.html">get</a> an object ID wrapper for the current task of the current processor. However, the wrapper created in this way must not outlive the originating task.</p>
<h4 id="kernel-assumed-to-be-operational" class="section-header"><a href="#kernel-assumed-to-be-operational">Kernel Assumed to be Operational</a></h4>
<p><strong>It’s assumed that this crate’s functions are called while the kernel is operational</strong> (i.e., <code>sns_ker</code> returns <code>FALSE</code>). It’s up to application programmers to make sure they are not called inside initialization or termination routines.</p>
<h4 id="restricted-tasks" class="section-header"><a href="#restricted-tasks">Restricted Tasks</a></h4>
<p>If restricted tasks are not enabled by the <code>rstr_task</code> feature, <strong>the caller is assumed to be a non-restricted task.</strong> When called from a restricted task, blocking functions can return <code>E_NOSPT</code> , which is not handled and will cause a UB if the <code>rstr_task</code> feature is not enabled.</p>
</div></details><h2 id="modules" class="section-header"><a href="#modules">Modules</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="_changelog_/index.html" title="itron_asp3::_changelog_ mod">_changelog_</a></div><div class="item-right docblock-short"><p>Changelog (<code>CHANGELOG.md</code>)</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="abi/index.html" title="itron_asp3::abi mod">abi</a></div><div class="item-right docblock-short"><p>C API</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="closure/index.html" title="itron_asp3::closure mod">closure</a><span class="stab portability" title="This is supported on crate feature `unstable` only"><code>unstable</code></span></div><div class="item-right docblock-short"><p>Closures: <code>(fn(EXINF), EXINF)</code></p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="dataqueue/index.html" title="itron_asp3::dataqueue mod">dataqueue</a><span class="stab portability" title="This is supported on crate feature `unstable` only"><code>unstable</code></span></div><div class="item-right docblock-short"><p>Dataqueues</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="error/index.html" title="itron_asp3::error mod">error</a><span class="stab portability" title="This is supported on crate feature `unstable` only"><code>unstable</code></span></div><div class="item-right docblock-short"><p>Error types.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="eventflag/index.html" title="itron_asp3::eventflag mod">eventflag</a><span class="stab portability" title="This is supported on crate feature `unstable` only"><code>unstable</code></span></div><div class="item-right docblock-short"><p>Eventflags (TODO)</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="interrupt/index.html" title="itron_asp3::interrupt mod">interrupt</a><span class="stab portability" title="This is supported on crate feature `unstable` only"><code>unstable</code></span></div><div class="item-right docblock-short"><p>Interrupts (TODO)</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="kernel/index.html" title="itron_asp3::kernel mod">kernel</a><span class="stab portability" title="This is supported on crate feature `unstable` only"><code>unstable</code></span></div><div class="item-right docblock-short"><p>Miscellaneous functions that are not associated to specific kernel objects.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="macros/index.html" title="itron_asp3::macros mod">macros</a><span class="stab portability" title="This is supported on crate features `nightly` and `unstable` only"><code>nightly</code> and <code>unstable</code></span></div><div class="item-right docblock-short"><p>Provides macros that allow downstream crates to examine the choice of
the target kernel.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="memorypool/index.html" title="itron_asp3::memorypool mod">memorypool</a><span class="stab portability" title="This is supported on crate feature `unstable` only"><code>unstable</code></span></div><div class="item-right docblock-short"><p>Memory pools</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="messagebuffer/index.html" title="itron_asp3::messagebuffer mod">messagebuffer</a><span class="stab portability" title="This is supported on crate feature `unstable` and (crate features `asp3` and `messagebuf`, or crate features `solid_asp3` and `messagebuf`, or crate feature `none`) only"><code>unstable</code> and (<code>asp3</code> and <code>messagebuf</code>, or <code>solid_asp3</code> and <code>messagebuf</code>, or <code>none</code>)</span></div><div class="item-right docblock-short"><p>Message buffers</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="mutex/index.html" title="itron_asp3::mutex mod">mutex</a><span class="stab portability" title="This is supported on crate feature `unstable` only"><code>unstable</code></span></div><div class="item-right docblock-short"><p>Mutexes</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="prioritydataqueue/index.html" title="itron_asp3::prioritydataqueue mod">prioritydataqueue</a><span class="stab portability" title="This is supported on crate feature `unstable` only"><code>unstable</code></span></div><div class="item-right docblock-short"><p>Priority dataqueues (TODO)</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="processor/index.html" title="itron_asp3::processor mod">processor</a><span class="stab portability" title="This is supported on crate feature `unstable` only"><code>unstable</code></span></div><div class="item-right docblock-short"><p>Multiprocessing</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="semaphore/index.html" title="itron_asp3::semaphore mod">semaphore</a><span class="stab portability" title="This is supported on crate feature `unstable` only"><code>unstable</code></span></div><div class="item-right docblock-short"><p>Semaphores</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="task/index.html" title="itron_asp3::task mod">task</a><span class="stab portability" title="This is supported on crate feature `unstable` only"><code>unstable</code></span></div><div class="item-right docblock-short"><p>Tasks</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="time/index.html" title="itron_asp3::time mod">time</a><span class="stab portability" title="This is supported on crate feature `unstable` only"><code>unstable</code></span></div><div class="item-right docblock-short"><p>Temporal quantification</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="wait/index.html" title="itron_asp3::wait mod">wait</a><span class="stab portability" title="This is supported on crate feature `unstable` only"><code>unstable</code></span></div><div class="item-right docblock-short"><p>Shared definitions for waitable objects</p>
</div></div></div></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="itron_asp3" data-search-index-js="../search-index.js" data-search-js="../search.js"></div>
</body></html>